<?php
 class ProductLabelsCest { private $customer_index; private $current_page; private $labels; public function __construct() { $this->labels = [ '.sd-label--code-new', '.sd-label--code-hit', '[class*="sd-label--code-custom"]', ]; } public function _before(AcceptanceTester $I): void { $I->amLoggedInAs('guest'); $options = $I->getOptions(); $this->customer_index = '/' . $options['customer_index']; } public function _after(AcceptanceTester $I): void { $I->dontSeeErrors($this->current_page); } public function checkDetailLabels(AcceptanceTester $I, $scenario): void { $config = $I->getAcceptanceSuiteConfig('WebDriver'); if (empty($config)) { $scenario->skip('WebDriver required for this test'); } $I->wantTo('Check labels on detail product page'); $this->current_page = $this->customer_index . '?dispatch=products.view&product_id=12'; $I->amOnPage($this->current_page); foreach ($this->labels as $label) { $I->seeElement($label); } $I->seeElement('[class*="sd-label--code-custom"]'); } public function checkProductListLabels(AcceptanceTester $I, $scenario): void { $config = $I->getAcceptanceSuiteConfig('WebDriver'); if (empty($config)) { $scenario->skip('WebDriver required for this test'); } $I->wantTo('Check labels on products list'); $this->current_page = $this->customer_index . '?dispatch=categories.view&category_id=224'; $I->amOnPage($this->current_page); foreach ($this->labels as $label) { $I->seeElement($label); } $I->seeElement('[class*="sd-label--code-custom"]'); } public function checkQuickViewLabels(AcceptanceTester $I, $scenario): void { $config = $I->getAcceptanceSuiteConfig('WebDriver'); if (empty($config)) { $scenario->skip('WebDriver required for this test'); } $I->wantTo('Check labels on quick view'); $this->current_page = $this->customer_index . '?dispatch=categories.view&category_id=224'; $I->amOnPage($this->current_page); $I->clickElement('div.ty-quick-view-button > a[data-ca-view-id="12"]'); $I->wait(10); $I->seeElement('div[aria-describedby="product_quick_view"]'); foreach ($this->labels as $label) { $I->seeElement($label); } $I->seeElement('[class*="sd-label--code-custom"]'); } public function checkLabelFilter(AcceptanceTester $I, $scenario): void { $config = $I->getAcceptanceSuiteConfig('WebDriver'); if (empty($config)) { $scenario->skip('WebDriver required for this test'); } $I->wantTo('Check labels filter on products list'); $this->current_page = $this->customer_index . '?dispatch=categories.view&category_id=223'; $I->amOnPage($this->current_page); $I->seeElement('form[name="product_form_12"]'); $I->seeElement('form[name="product_form_78"]'); $I->checkOption('input[id$="new"]'); $I->wait(3); $I->checkOption('input[id$="hit"]'); $I->wait(3); $I->seeElement('form[name="product_form_12"]'); $I->dontSeeElement('form[name="product_form_78"]'); $I->clickElement('span.ty-product-filters__title > a > i'); $I->wait(3); $I->seeElement('form[name="product_form_12"]'); $I->seeElement('form[name="product_form_78"]'); } } 